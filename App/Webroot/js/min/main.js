!function(){"use strict";var t,e,i,o,n,a,l,r=function(t,e){var i=document.createElement("a"),o=document.createTextNode(e);i.classList.add("animated"),i.classList.add("bounceInDown"),i.classList.add("alert"),i.classList.add("alert--"+t),i.href="#",i.appendChild(o),$("body").prepend(i)},c=function(t,e){var i=$("<h2 class='work__title'></h2>"),a=$("<p class='work__description'></p>");t.preventDefault(),$(".adminToolBar__link--save").hide(),$(".adminToolBar__link--abort").hide(),$(".adminToolBar__link--edit").show(),i.html(!e&&$(".editForm__input--title").val()||o),$(".editForm__input--title").replaceWith(i),a.html(!e&&$(".editForm__input--description").val()||n),$(".editForm__input--description").replaceWith(a)},d=function(e){t=$(e.target).attr("href"),t=t.slice(1,t.length)},s=function(t){t.preventDefault(),$("#addWorkForm").toggleClass("hidden")};$(function(){$(".adminToolBar__link--edit").on("click",function(r){a=$("<input class='editForm__input editForm__input--title' autocomplete='off' type='text' name='title'/>"),l=$("<textarea class='editForm__input editForm__input--description' rows='5' name='description'/>"),r.preventDefault(),d(r),e=$("#"+t+" .work__title"),i=$("#"+t+" .work__description"),o=e.html(),$.ajax({url:window.location.origin+"/get/work/"+t,method:"GET",success:function(t){n=t,l.val($("<div/>").html(n).text()),i.replaceWith(l)}}),$(this).hide(),$("#"+t+" .adminToolBar__link--save").show(),$("#"+t+" .adminToolBar__link--abort").show(),a.val(o),e.replaceWith(a)}),$(".adminToolBar__link--save").on("click",function(e){e.preventDefault(),$(this).hide(),$("#"+t+" .adminToolBar__link--edit").show(),$("#"+t+" .adminToolBar__link--abort").hide();var i="title="+$(".editForm__input--title").val()+"&description="+$(".editForm__input--description").val();$.ajax({url:window.location.origin+"/edit/work/"+t,method:"POST",data:i,beforeSend:function(t){t.setRequestHeader("Content-type","application/x-www-form-urlencoded")},success:function(t){r("success","Réalisation mise à jour !"),window.setTimeout(function(){window.location.reload()},1500)}}),c(e,!1)}),$(".adminToolBar__link--delete").on("click",function(e){e.preventDefault(),d(e),swal({title:"Are you sure?",text:"You will not be able to recover this work !",type:"error",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it !",cancelButtonText:"No, abort please!",closeOnConfirm:!1,closeOnCancel:!1},function(e){e?($.ajax({url:"delete/work/"+t}),$("#"+t).slideUp(),swal("Deleted!","Your imaginary file has been deleted.","success")):swal("Aborted","Your work is safe :)")})}),$(".adminToolBar__link--abort").on("click",function(t){c(t,!0)}),$("#addWork").on("click",function(t){s(t)}),$("#closeAdminForm").on("click",function(t){s(t)}),$(".alert").on("click",function(t){t.preventDefault(),$(this).slideUp()})})}();